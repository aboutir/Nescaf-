<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
<title>Chat Bot Nescaf√© - Plein √©cran compact</title>
<style>
  html, body {
    margin: 0; padding: 0;
    height: 100%;
    background: #ece5dd;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: stretch;
    overflow: auto; /* Permet de ne pas cacher de contenu */
  }
  #chat-container {
    width: 100vw;
    height: 100vh;
    max-width: 480px;
    background: white;
    box-shadow: 0 0 14px rgba(0,0,0,0.18);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  #header-bar {
    height: 36px;
    background: #075e54;
    color: white;
    font-weight: 700;
    padding: 6px 16px;
    font-size: 0.9rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  #info-message {
    font-weight: 600;
    white-space: nowrap;
  }
  #online-count {
    font-size: 0.85rem;
    background: #056d61;
    padding: 2px 8px;
    border-radius: 16px;
    white-space: nowrap;
  }
  #chat-messages {
    flex-grow: 1;
    padding: 12px;
    overflow-y: auto;
    background: #fff;
    display: flex;
    flex-direction: column;
    gap: 7px;
    overflow-x: hidden;
    font-size: 0.9rem;
    min-height: 0;
  }
  .message {
    max-width: 80%;
    padding: 8px 12px;
    border-radius: 14px;
    line-height: 1.25;
    word-wrap: break-word;
    word-break: break-word;
  }
  .message.bot {
    background: #ebebeb;
    color: #303030;
    border-bottom-left-radius: 4px;
    align-self: flex-start;
  }
  .message.user {
    background: #dcf8c6;
    color: #202020;
    border-bottom-right-radius: 4px;
    align-self: flex-end;
  }
  .message .username {
    font-weight: 700;
    font-size: 0.8rem;
    margin-bottom: 2px;
    color: #555;
    user-select: text;
  }
  #typing-indicator {
    height: 32px;
    padding: 0 12px;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.85rem;
    color: #555;
    font-weight: 600;
    visibility: hidden;
    user-select: none;
    pointer-events: none; /* Pour ne pas bloquer la saisie */
  }
  #typing-indicator.visible {
    visibility: visible;
  }
  .typing-dot {
    width: 6px;
    height: 6px;
    background: #555;
    border-radius: 50%;
    opacity: 0.4;
    animation: blink 1.4s infinite;
  }
  .typing-dot:nth-child(1) { animation-delay: 0s; }
  .typing-dot:nth-child(2) { animation-delay: 0.2s; }
  .typing-dot:nth-child(3) { animation-delay: 0.4s; }
  @keyframes blink {
    0%, 80%, 100% { opacity: 0.4; }
    40% { opacity: 1; }
  }
  #input-area {
    display: flex;
    padding: 8px 12px;
    background: #f0f0f0;
    border-top: 1px solid #ccc;
    flex-shrink: 0;
    position: relative;
    z-index: 10; /* Toujours au dessus */
  }
  #input-area input[type="text"] {
    flex-grow: 1;
    padding: 10px 14px;
    border-radius: 20px;
    border: 1px solid #bbb;
    font-size: 0.9rem;
    outline: none;
    user-select: text;
  }
  #input-area button {
    margin-left: 8px;
    background-color: #075e54;
    color: white;
    border: none;
    padding: 10px 16px;
    font-weight: 700;
    font-size: 0.9rem;
    border-radius: 20px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  #input-area button:hover {
    background-color: #0a7d68;
  }
</style>
</head>
<body>

<div id="chat-container" role="main" aria-label="Chat discussion Nescaf√© automatique fullscreen compact">
  <div id="header-bar">
    <div id="info-message">Vous pouvez √©crire votre commentaire</div>
    <div id="online-count" aria-live="polite" aria-atomic="true" aria-label="Membres en ligne">Membres : <span id="online-number"></span></div>
  </div>

  <div id="chat-messages" aria-live="polite" aria-relevant="additions"></div>

  <div id="typing-indicator" aria-live="assertive" aria-label="Bot en train d‚Äô√©crire">
    <div class="typing-dot"></div>
    <div class="typing-dot"></div>
    <div class="typing-dot"></div>
    <span id="typing-name">Un membre √©crit...</span>
  </div>

  <div id="input-area">
    <input type="text" id="userInput" placeholder="√âcrire un message..." aria-label="Zone de saisie de message" />
    <button id="sendBtn" aria-label="Envoyer le message">Envoyer</button>
  </div>
</div>

<script>
  const africanLastNames = [
    'Kouakou', 'Yao', 'Konan', 'Traor√©', 'Diallo', 'Kone', 'Gban√©', 'Zadi', 'Assi', 'N‚ÄôGuessan',
    'Mensah', 'Boateng', 'Owusu', 'Annan', 'Acheampong',
    'Ndiaye', 'Diop', 'Fall', 'Sow', 'Gueye',
    'Nguyen', 'Koffi', 'Mbemba', 'Sawadogo', 'Sanogo',
    'Chirwa', 'Phiri', 'Zomba', 'Mwale', 'Kumwenda',
    'Kamara', 'Sesay', 'Conteh', 'Bangura', 'Kallon'
  ];
  const africanFirstNames = [
    'Jean', 'Claude', 'Mohamed', 'Alain', 'Oumar', 'Isma√´l', 'Kouadio', 'Serge', 'Emmanuel', 'Yves',
    'Kwame', 'Kofi', 'Ama', 'Nana', 'Yaa', 'Aminata', 'Fatou', 'Abdoulaye', 'Cheikh', 'Moussa'
  ];
  const motivatingMessages = [
  "Je viens de recevoir mon retrait tout √† l'heure. Franchement Nestl√© c‚Äôest du s√©rieux üëèüí∞",
  "Chaque jour avec Nestl√©, c‚Äôest une vraie opportunit√© de r√©ussite.",
  "Encore un retrait valid√© sans stress, bravo √† l‚Äô√©quipe Nestl√©.",
  "Les paiements sont rapides ici, rien √† dire üî•üî•",
  "Merci Nestl√© üôè le projet ne d√©√ßoit pas, on avance üí™",
  "Restez motiv√©s, les retraits tombent les uns apr√®s les autres üòç",
  "Franchement ce projet m‚Äôa redonn√© confiance apr√®s toutes les arnaques qu‚Äôon a eues avant.",
  "Nestl√© motive tout le monde √† avancer vers le succ√®s üåü",
  "Mon retrait d‚Äôaujourd‚Äôhui est pass√© nickel, merci la team.",
  "Chaque jour on est plusieurs √† recevoir, √ßa fait plaisir üòÑ",
  "Ce matin encore plein d‚Äôhommes ont confirm√© leur retrait üí∏",
  "C‚Äôest motivant de voir la communaut√© grandir comme √ßa.",
  "Les anciens projets nous ont eu, mais celui-ci est diff√©rent.",
  "PepsiCo et Coca ont √©chou√©, mais Nestl√© assure üíØ",
  "Avec Nestl√©, la r√©ussite devient une habitude üíº",
  "Un grand merci √† Nestl√© pour sa fiabilit√© üôè",
  "Les retraits tombent tous les jours sans retard üí∞",
  "On voit que c‚Äôest bien g√©r√© ici, continuez comme √ßa üëå",
  "La confiance s‚Äôinstalle, c‚Äôest √ßa le vrai business üí™",
  "Encore un membre satisfait aujourd‚Äôhui, bravo √† tous üéâ",
  "Mon retrait a √©t√© re√ßu √† 18h pile, comme pr√©vu.",
  "Je n‚Äôy croyais pas au d√©but, maintenant je suis convaincu.",
  "Nestl√© c‚Äôest pas du jeu, les preuves sont l√† üí∏",
  "Honn√™tement, √ßa fait du bien de voir un projet fiable.",
  "F√©licitations √† tous ceux qui ont re√ßu aujourd‚Äôhui ‚ù§Ô∏è",
  "On est ensemble la famille Nestl√©, la route continue üöÄ"
];
  const autoResponses = [
    { keywords: ['retrait', 'attente', 'paiement'], response: "Nous sommes confiants, le paiement de demain arrivera comme pr√©vu." },
    { keywords: ['projet', 'nestl√©'], response: "Nestl√© est un projet solide, vous pouvez y croire pleinement." },
    { keywords: ['investir', 'niveau'], response: "Choisissez un plan qui correspond √† votre budget et objectifs." },
    { keywords: ['support', 'aide'], response: "N‚Äôh√©sitez pas √† contacter l‚Äô√©quipe support pour toute question." },
    { keywords: ['bonjour', 'salut', 'hello'], response: "Salut ! Restez motiv√©s et impliqu√©s." }
  ];
  function getAutoResponse(msg) {
    const lower = msg.toLowerCase();
    for (let {keywords, response} of autoResponses) {
      if (keywords.some(k => lower.includes(k))) return response;
    }
    return motivatingMessages[Math.floor(Math.random() * motivatingMessages.length)];
  }
  function generateName() {
    const last = africanLastNames[Math.floor(Math.random() * africanLastNames.length)];
    const first = africanFirstNames[Math.floor(Math.random() * africanFirstNames.length)];
    return `${last} ${first}`;
  }
  const bots = [];
  for (let i = 0; i < 1000; i++) bots.push({ id: i, name: generateName() });
  const chatDiv = document.getElementById('chat-messages');
  const inputField = document.getElementById('userInput');
  const sendBtn = document.getElementById('sendBtn');
  const typingDiv = document.getElementById('typing-indicator');
  const typingName = document.getElementById('typing-name');
  const onlineCountSpan = document.getElementById('online-number');
  function updateOnline() {
    onlineCountSpan.textContent = 2500 + Math.floor(Math.random() * 2500);
  }
  updateOnline();
  const messageQueue = [];
  let processing = false;
  function typeMessage(name, message, isBot, callback) {
    const el = document.createElement('div');
    el.className = 'message ' + (isBot ? 'bot' : 'user');
    el.innerHTML = `<span class="username">${name}:</span> <span class="typed-text"></span>`;
    chatDiv.appendChild(el);
    chatDiv.scrollTop = chatDiv.scrollHeight;
    const txtSpan = el.querySelector('.typed-text');
    let idx = 0;
    function typeNext() {
      if (idx < message.length) {
        txtSpan.textContent += message.charAt(idx);
        idx++;
        chatDiv.scrollTop = chatDiv.scrollHeight;
        setTimeout(typeNext, 60);
      } else {
        if (callback) callback();
      }
    }
    typeNext();
  }
  function enqueueBot(bot, message) {
    messageQueue.push({ bot, message });
    processQueue();
  }
  async function processQueue() {
    if (processing || messageQueue.length === 0) return;
    processing = true;
    const { bot, message } = messageQueue.shift();
    typingName.textContent = `${bot.name} √©crit...`;
    typingDiv.classList.add('visible');
    await new Promise(r => setTimeout(r, message.length * 60 + 1000));
    typingDiv.classList.remove('visible');
    typeMessage(bot.name, message, true, () => {
      processing = false;
      setTimeout(processQueue, 800);
    });
  }
  function startBots() {
    bots.forEach(bot => {
      setTimeout(() => {
        const msg = motivatingMessages[Math.floor(Math.random() * motivatingMessages.length)];
        enqueueBot(bot, msg);
        setInterval(() => {
          const msgX = motivatingMessages[Math.floor(Math.random() * motivatingMessages.length)];
          enqueueBot(bot, msgX);
        }, 18000 + Math.random() * 20000);
      }, Math.random() * 10000);
    });
  }
  sendBtn.addEventListener('click', () => handleUser());
  inputField.addEventListener('keydown', e => {
    if (e.key === 'Enter') {
      e.preventDefault();
      handleUser();
    }
  });
  function handleUser() {
    const val = inputField.value.trim();
    if (!val) return;
    addMessage('Vous', val, false);
    inputField.value = '';
    const responderBot = bots[Math.floor(Math.random() * bots.length)];
    const response = getAutoResponse(val);
    setTimeout(() => enqueueBot(responderBot, response), 1200 + Math.random() * 1800);
  }
  function addMessage(name, text, isBot) {
    const el = document.createElement('div');
    el.className = 'message ' + (isBot ? 'bot' : 'user');
    el.innerHTML = `<span class="username">${name}:</span> ${text}`;
    chatDiv.appendChild(el);
    chatDiv.scrollTop = chatDiv.scrollHeight;
  }
  window.onload = () => {
    addMessage('Syst√®me', 'soyez les bienvenus vous pouvez maintenant laiss√© votre commentaire de ce vous en pensez de nous.', true);
    updateOnline();
    startBots();
    inputField.focus(); // Mettre le focus dans la zone de saisie d√®s l'ouverture
  };
</script>

</body>
</html>
